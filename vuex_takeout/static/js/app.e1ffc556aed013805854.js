webpackJsonp([1],{"0Qkp":function(t,e){},LLe0:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n("xd7I"),i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=n("C7Lr")({name:"App"},i,!1,function(t){n("XrI3")},null,null).exports,r=n("usm0"),a=n("0MWo"),c=n.n(a),l={data:function(){return{scrollTop:0,slotFixed:!1,originSize:{}}},props:{offset:{type:null,default:"0rem"}},computed:{offsetInPX:function(){if("string"!=typeof this.offset)return console.log("number"),c()(this.offset);if(/px$/i.test(this.offset))return console.log("isPx"),c()(this.offset.replace(/px/i,""));if(/rem$/i.test(this.offset)){console.log("isREM");var t=document.querySelector("html"),e=void 0;return e=window.getComputedStyle?getComputedStyle(t,!1).fontSize:t.currentStyle.fontSize,e=c()(e.replace(/px/i,"")),c()(this.offset.replace(/rem/i,""))*e}return/\d?/.test(this.offset)?(console.log("numberString"),c()(this.offset)):void 0},offsetTop:function(){return this.$el.offsetTop}},methods:{handleScroll:function(t){this.scrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,this.scrollTop>=this.offsetTop-this.offsetInPX?this.slotFixed=!0:this.slotFixed=!1}},mounted:function(){var t=this.$refs.seizer,e=this.$el;t.style.width=e.offsetWidth+"px",t.style.height=e.offsetHeight+"px",this.originSize={width:e.offsetWidth+"px",height:e.offsetHeight+"px"},window.addEventListener("scroll",this.handleScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"wrapper",staticClass:"affix_warp"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.slotFixed,expression:"slotFixed"}],ref:"seizer",staticClass:"affix_seizer"}),t._v(" "),n("div",{class:{isFixed:t.slotFixed,notFixed:!t.slotFixed},style:[t.originSize,{top:t.slotFixed?t.offset+"px":"0rem"}]},[t._t("default")],2)])},staticRenderFns:[]};var u,d=n("C7Lr")(l,f,!1,function(t){n("YXTq")},"data-v-2520e3bc",null).exports,h=n("rVsN"),p=n.n(h),m=n("aozt"),v=n.n(m),g=function(){return new p.a(function(t,e){v.a.get("/static/storeInfo.json").then(function(e){t(e.data)})})},_=function(){return new p.a(function(t,e){v.a.get("/static/products.json").then(function(e){t(e.data.list)})})},x=n("kfHR"),y=n.n(x),C=n("a3Yh"),w=n.n(C),L={getPosition:function(t){for(var e=t.offsetLeft,n=t.offsetTop,s=t.offsetParent;null!==s;)e+=s.offsetLeft,n+=s.offsetTop,s=s.offsetParent;return{left:e,top:n}}};var k={data:function(){return{}},props:(u={label:{type:String,default:""},offset:{default:0},href:{type:String,default:""}},w()(u,"label",{type:null,default:""}),w()(u,"hashURL",{type:Boolean,default:!1}),u),methods:{linkClick:function(t){var e,n,s,i;this.hashURL||t.preventDefault(),e=this.href,n=this.offset,s=document.querySelector(e),i=L.getPosition(s).top,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,window.scrollTo(0,i-n),y()(document.querySelectorAll(".activeAnchorLink")).forEach(function(t){t.classList.remove("activeAnchorLink")}),this.$refs.link.classList.add("activeAnchorLink")}}},S={render:function(){var t=this.$createElement;return(this._self._c||t)("a",{ref:"link",attrs:{href:this.href},on:{click:this.linkClick}},[this._v(this._s(this.label))])},staticRenderFns:[]},b=n("C7Lr")(k,S,!1,null,null,null).exports,I={data:function(){return{linkElements:[],anchors:[]}},props:{offset:{type:Number,default:0}},methods:{handleScroll:function(t){var e=this,n=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,s=this.anchors.map(function(t){var e=document.querySelector(t);return L.getPosition(e).top}),i=Math.max(s.findIndex(function(t,s,i){return n<t-e.offset})-1,0);document.body.scrollHeight-n>window.window.innerHeight&&(this.linkElements.forEach(function(t){t.classList.remove("activeAnchorLink")}),this.linkElements[i].classList.add("activeAnchorLink"))}},mounted:function(){window.addEventListener("scroll",this.handleScroll)},updated:function(){this.$slots.default&&(this.anchors=this.$slots.default.map(function(t){return t.componentInstance.href}),this.linkElements=this.$slots.default.map(function(t){return t.elm}),this.linkElements[0].classList.add("activeAnchorLink"),console.log(this.anchors),console.log(this.linkElements))},beforeDestroy:function(){window.removeEventListener("scroll",this.handleScroll)}},$={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._t("default")],2)},staticRenderFns:[]};var E={components:{Affix:d,Anchors:n("C7Lr")(I,$,!1,function(t){n("0Qkp")},null,null).exports,AnchorLink:b},data:function(){return{info:{},productList:[],searchBarFixed:!1,offsetTop:0,affix1Height:0}},methods:{addItem:function(t){this.$store.commit("addItem",t)}},computed:{totalCount:function(){return this.$store.getters.totalItemCount},typeList:function(){var t={};return this.productList.forEach(function(e,n){e.id=n,t.hasOwnProperty(e.type)?t[e.type].push(e):t[e.type]=[e]}),t},hotList:function(){return this.productList.filter(function(t,e,n){return t.isHot})},recommendList:function(){}},created:function(){},mounted:function(){var t=this;g().then(function(e){t.info=e}),_().then(function(e){t.productList=e}),this.affix1Height=this.$refs.affix1.offsetHeight}},T={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"tab",attrs:{id:"storeInfo"}},[n("div",{staticClass:"bg",style:{backgroundImage:"url("+t.info.background+")"}}),t._v(" "),n("img",{staticClass:"thumb",attrs:{src:t.info.thumb}}),t._v(" "),n("div",{staticClass:"storeContent"},[n("span",{staticStyle:{"font-size":"1.5rem"}},[t._v(t._s(t.info.name))]),t._v(" "),n("br"),t._v(" "),n("br"),t._v(" "),n("span",{staticStyle:{"font-size":"1rem"}},[n("span",[t._v("评价"+t._s(t.info.rating))]),t._v(" "),n("i",{staticStyle:{margin:"0 0.5rem"}},[t._v("|")]),t._v(" "),n("span",[t._v("月售"+t._s(t.info.comment_count))]),t._v(" "),n("i",{staticStyle:{margin:"0 0.5rem"}},[t._v("|")]),t._v(" "),n("span",[t._v("配送约"+t._s(t.info.eta)+"分钟")])])])]),t._v(" "),n("affix",{staticStyle:{"margin-bottom":"1rem"}},[n("div",{ref:"affix1",staticClass:"text-l bg-white",attrs:{id:"tabCon"}},[n("span",[t._v("点餐")]),t._v(" "),n("span",[t._v("评价")]),t._v(" "),n("span",[t._v("商家")])])]),t._v(" "),n("div",{attrs:{id:"hotList"}},t._l(t.hotList,function(e,s){return n("div",{key:s,staticClass:"hotListItem"},[n("div",{staticStyle:{width:"100%",height:"10rem","background-position":"center","background-size":"cover"},style:{backgroundImage:"url("+e.image+")"}}),t._v(" "),n("div",{staticStyle:{padding:"0.5rem"}},[n("div",[t._v(t._s(e.name))]),t._v(" "),n("div",{staticStyle:{"margin-top":"0.5rem",position:"relative"}},[n("span",{staticClass:"text-l text-danger"},[t._v("￥"+t._s(e.price))]),t._v(" "),n("div",{staticClass:"editor text-xl",staticStyle:{padding:"0"}},[n("i",{staticClass:"fa fa-minus-circle minus text-primary",class:{show:t.$store.getters.hasItem(e.id)},on:{click:function(n){return t.$store.commit("removeItem",e.id)}}}),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.$store.getters.hasItem(e.id),expression:"$store.getters.hasItem(item.id)"}],staticClass:"text-l",staticStyle:{margin:"0 0.2rem"}},[t._v(t._s(t.$store.getters.itemCount(e.id)))]),t._v(" "),n("i",{staticClass:"fa fa-plus-circle plus text-primary",on:{click:function(n){return t.addItem(e)}}})])])])])}),0),t._v(" "),n("div",{attrs:{id:"productList"}},[n("div",{staticStyle:{display:"flex"}},[n("div",{staticClass:"typeList"},[n("Affix",{attrs:{offset:t.affix1Height}},[n("anchors",{attrs:{offset:t.affix1Height}},t._l(t.typeList,function(e,s,i){return n("anchor-link",{key:i,staticClass:"typeItem",attrs:{href:"#anchor"+s,label:s+t.$store.getters.typeCount(s),offset:t.affix1Height}})}),1)],1)],1),t._v(" "),n("div",{staticClass:"list"},t._l(t.typeList,function(e,s,i){return n("div",{key:i},[n("Affix",{attrs:{offset:t.affix1Height,id:"anchor"+s}},[n("div",{staticClass:"itemCategory"},[t._v(t._s(s))])]),t._v(" "),t._l(e,function(e,s){return n("div",{key:s,staticClass:"listItem"},[n("div",{staticClass:"thumb",style:{backgroundImage:"url("+e.image+")"}}),t._v(" "),n("div",{staticClass:"info"},[n("div",{staticClass:"text-l"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"text-light"},[t._v(t._s(e.description))]),t._v(" "),n("div",{staticClass:"text-l",staticStyle:{"margin-top":"auto"}},[n("span",{staticClass:"text-m text-danger"},[t._v("￥")]),t._v(" "),n("span",{staticClass:"text-danger"},[t._v(t._s(e.price))])])]),t._v(" "),n("div",{staticClass:"editor text-xl"},[n("i",{staticClass:"fa fa-minus-circle text-primary minus",class:{show:t.$store.getters.hasItem(e.id)},on:{click:function(n){return t.$store.commit("removeItem",e.id)}}}),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.$store.getters.hasItem(e.id),expression:"$store.getters.hasItem(subitem.id)"}],staticClass:"text-l",staticStyle:{margin:"0 0.8rem"}},[t._v(t._s(t.$store.getters.itemCount(e.id)))]),t._v(" "),n("i",{staticClass:"fa fa-plus-circle text-primary plus",on:{click:function(n){return t.addItem(e)}}})])])})],2)}),0)]),t._v(" "),n("div",{staticClass:"text-white",attrs:{id:"cashier"}},[n("span",{staticClass:"text-danger text-xl text-bold"},[t._v("￥"+t._s(t.$store.getters.totalPrice))]),t._v(" "),n("span",[t._v("共"+t._s(t.$store.getters.totalItemCount)+"件商品")])])])],1)},staticRenderFns:[]};var F=n("C7Lr")(E,T,!1,function(t){n("LLe0")},"data-v-74177343",null).exports;s.a.use(r.a);var A=new r.a({routes:[{path:"/",name:"StoreDetail",component:F}]}),H=n("R4Sj");s.a.use(H.a);var z=new H.a.Store({state:{shoppingCart:[]},mutations:{addItem:function(t,e){t.shoppingCart.unshift(e)},removeItem:function(t,e){var n=t.shoppingCart.findIndex(function(t){return t.id==e});console.log(n),-1!=n&&t.shoppingCart.splice(n,1)}},getters:{totalItemCount:function(t){return t.shoppingCart.length},totalPrice:function(t){return 0==t.shoppingCart.length?0:t.shoppingCart.reduce(function(t,e){return t+e.price},0)},typeCount:function(t){return function(e){return t.shoppingCart.filter(function(t){return t.type==e}).length}},itemCount:function(t){return function(e){return t.shoppingCart.filter(function(t){return t.id==e}).length}},hasType:function(t){return function(e){return t.shoppingCart.some(function(t){return t.type==e})}},hasItem:function(t){return function(e){return t.shoppingCart.some(function(t){return t.id==e})}}}});n("WKwe"),n("tCX/"),n("oDfx");s.a.config.productionTip=!1,new s.a({el:"#app",router:A,store:z,components:{App:o},template:"<App/>",computed:{scrollTop:function(){return document.documentElement.scrollTop||document.body.scrollTop||window.pageYOffset}}})},WKwe:function(t,e){},XrI3:function(t,e){},YXTq:function(t,e){},oDfx:function(t,e){},"tCX/":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.e1ffc556aed013805854.js.map